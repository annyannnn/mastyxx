
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Салон красоты «Masty» - Запись</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Сохраняем существующие стили 10.html, но убираем стили для .nav и .footer */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background-color: #FDF4F4;
            color: #856A65;
            line-height: 1.4;
        }

        /* Удаляем старые стили навигации и футера, так как они теперь из style.css */
        
        /* Основной контент */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 24px;
        }

        h2 {
            margin-bottom: 20px;
            font-size: 20px;
            color: #856A65;
        }

        /* Выбор салона */
        .salon-list {
            margin-bottom: 40px;
        }

        .salon-card {
            border: 1px solid #856A65;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .salon-card.selected {
            border-color: #856A65;
            background-color: #E8CEC9;
        }

        .salon-card:hover {
            border-color: #000;
        }

        .salon-name {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 5px;
        }

        .salon-address {
            color: #666;
            font-size: 14px;
        }

        /* Выбор услуг */
        .services-categories {
            margin-bottom: 30px;
        }

        .category-section {
            margin-bottom: 30px;
        }

        .category-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #856A65;
        }

        .services-list {
            margin-bottom: 20px;
        }

        .service-item {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            border: 1px solid #856A65;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .service-item.selected {
            background-color: #E8CEC9;
            border-color: #856A65;
        }

        .service-item:hover {
            border-color: #000;
        }

        .service-name {
            flex: 1;
        }

        .service-price {
            font-weight: bold;
            margin-left: 20px;
            color: #000;
        }

        .service-description {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .service-duration {
            font-size: 12px;
            color: #666;
            margin-top: 3px;
        }

        /* Выбор мастеров */
        .specialists-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }

        .specialist-card {
            border: 1px solid #856A65;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .specialist-card.selected {
            border-color: #856A65;
            background-color: #E8CEC9;
        }

        .specialist-card:hover {
            border-color: #000;
        }

        .specialist-card.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background-color: #856A65;
        }

        .specialist-card.disabled:hover {
            border-color: #856A65;
        }

        .specialist-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .specialist-role {
            color: #666;
            font-size: 14px;
        }

        .specialist-duration {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .specialist-specialization {
            font-size: 11px;
            color: #666;
            margin-top: 3px;
            font-style: italic;
        }

        /* Классический календарь */
        .classic-calendar {
            background: #fff;
            border: 1px solid #856A65;
            margin-bottom: 30px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: #E8CEC9;
            border-bottom: 1px solid #856A65;
        }

        .calendar-nav {
            background: none;
            border: 1px solid #856A65;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 16px;
        }

        .calendar-nav:hover {
            border-color: #000;
        }

        .current-month {
            font-weight: bold;
            font-size: 18px;
        }

        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            background: #f1dbd7;
            border-bottom: 1px solid #856A65;
        }

        .weekday {
            padding: 12px 5px;
            text-align: center;
            font-weight: bold;
            font-size: 12px;
            color: #856A65;
        }

        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
        }

        .calendar-day {
            padding: 15px 5px;
            text-align: center;
            border: 1px solid #856A65;
            cursor: pointer;
            transition: all 0.3s;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .calendar-day:hover {
            background: #f1dbd7;
        }

        .calendar-day.selected {
            background: #856A65;
            color: #fff;
            border-color: #000;
        }

        .calendar-day.disabled {
            color: #000;
            cursor: not-allowed;
            background: #efefef;
        }

        .calendar-day.disabled:hover {
            background: #fafafa;
        }

        .calendar-day.other-month {
            color: #999;
            background: #f5f5f5;
        }

        .calendar-day.today {
            background: #CD8B7D;
            font-weight: bold;
        }

        /* Временные слоты */
        .time-slots-container {
            margin-top: 30px;
        }

        .duration-info {
            text-align: center;
            margin-bottom: 20px;
            padding: 10px;
            background: #fff;
            border-radius: 5px;
            font-weight: bold;
        }

        .time-period {
            margin: 20px 0 10px 0;
            font-weight: bold;
            font-size: 16px;
            padding-left: 10px;
            border-left: 3px solid #856A65;
        }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .time-slot {
            padding: 12px 8px;
            border: 1px solid #856A65;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            background: #FDF4F4;
        }

        .time-slot:hover {
            border-color: #000;
            background: #FDF4F4;
        }

        .time-slot.selected {
            background: #E8CEC9;
            color: #fff;
            border-color: #000;
        }

        .time-slot.disabled {
            color: #ccc;
            cursor: not-allowed;
            background: #f9f9f9;
        }

        .time-slot.disabled:hover {
            border-color: #ddd;
            background: #f9f9f9;
        }

        .time-slot.booked {
            background: #ffe6e6;
            color: #856A65;
            cursor: not-allowed;
            border-color: #ffcccc;
        }

        /* Дополнительная услуга */
        .add-service-prompt {
            text-align: center;
            margin: 40px 0;
            padding: 30px;
            background: #E8CEC9;
            border-radius: 10px;
        }

        .add-service-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .add-service-btn {
            padding: 12px 30px;
            border: 2px solid #715752;
            background: #856A65;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }

        .add-service-btn.yes {
            background: #856A65;
            color: white;
        }

        .add-service-btn.no {
            background: white;
            color: #856A65;
        }

        .add-service-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* Форма данных клиента */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #856A65;
            font-size: 14px;
        }

        .form-group textarea {
            height: 80px;
            resize: vertical;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-group input {
            width: auto;
        }

        /* Информация о записи */
        .appointment-summary {
            background: #E8CEC9;
            padding: 20px;
            margin: 30px 0;
            border: 1px solid #856A65;
        }

        .summary-item {
            margin-bottom: 10px;
        }

        .selected-services {
            margin-top: 15px;
        }

        .service-summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .discount-info {
            background: #E8CEC9;
            padding: 15px;
            border: 1px solid #856A65 ;
            margin: 20px 0;
            font-size: 14px;
        }

        .privacy-notice {
            font-size: 12px;
            color: #666;
            margin: 20px 0;
            text-align: center;
        }

        /* Кнопки */
        .btn {
            display: block;
            width: 200px;
            margin: 30px auto;
            padding: 15px;
            background: #000000;
            color: #fff;
            border: none;
            font-size: 16px;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
        }

        .btn-continue {
            background: #856A65 ;
            color: #fff;
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .error-message {
            color: #630000;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .selection-info {
            background: #E8CEC9;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #856A65;
        }

        /* Стили для отображения нескольких услуг */
        .appointed-service-item {
            background: #f8f9fa;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            border-left: 3px solid #856A65;
        }

        /* Стили для промокода */
        .promocode-section {
            background: #f8f9fa;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #856A65;
        }

        .promocode-input-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .promocode-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .promocode-btn {
            padding: 10px 20px;
            background: #856A65;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .promocode-btn:hover {
            background: #856A65;
        }

        .promocode-btn:disabled {
            background: #856A65;
            cursor: not-allowed;
        }

        .discount-applied {
            color: #856A65;
            font-weight: bold;
            margin-top: 10px;
            display: none;
        }

        .discount-error {
            color: #580000;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .original-price {
            text-decoration: line-through;
            color: #6c757d;
            font-size: 14px;
        }

        .discount-amount {
            color: hwb(0 0% 67%);
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .specialists-grid {
                grid-template-columns: 1fr;
            }
            
            .time-slots {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .calendar-day {
                padding: 10px 2px;
                font-size: 12px;
                min-height: 50px;
            }
            
            .add-service-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .promocode-input-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body id="body">
<header>
    <div class="header__items">
        <div class="header__img">
            <button
            onclick= "window.location.href='https://vk.com/club234239337'" style="background: none; border: none; padding: 0; cursor: pointer; outline: none;">
                <img src="VK.svg" alt="">
            </button></div>
        
        <nav><ul><li><a href="/mastyxx/index.html">Главная</a> </li>
        <li><a href="/mastyxx/Masters/masters.html">Мастера</a> </li>
        <li><a href="/mastyxx/price/price.html">Прайс</a> </li></ul></nav>
        <img class="header__logo" src="logo.svg" alt="">
        <nav><ul><li><a href="/mastyxx/stock/stock.html">Акции</a> </li>
        <li><a href="/mastyxx/reviews/reviews.html" >Отзывы</a></li></ul></nav>
        <li><a href="/mastyxx/contacts/contacts.html">Контакты</a> </li></ul></nav>
    </div>
    <hr>
</header> 
 
<!-- Основной контент -->
<div class="container">
    <!-- Страница 1: Выбор салона -->
    <div class="page active" id="page-salon">
        <h1>Запись на услугу</h1>
        <h2>Выберите салон</h2>
        
        <div class="salon-list">
            <div class="salon-card" onclick="selectSalon('Масти', 'ул. Зацепа, 22', this)">
                <div class="salon-name">Салон красоты «Masty»</div>
                <div class="salon-address">ул. Зацепа, 22</div>
            </div>
        </div>

        <button class="btn btn-continue" onclick="showPage('page-services')" id="btn-continue-salon">Далее</button>
    </div>

    <!-- Страница 2: Выбор услуг -->
    <div class="page" id="page-services">
        <h1>Выберите услугу</h1>
        <p style="text-align: center; margin-bottom: 20px; color: #666;">Вы можете выбрать только одну услугу за раз</p>
        
        <!-- Показываем уже выбранные услуги -->
        <div id="selected-services-preview" style="display: none; margin-bottom: 30px;">
            <div class="selection-info">
                <strong>Уже выбраны услуги:</strong>
                <div id="selected-services-list"></div>
            </div>
        </div>
        
        <div class="services-categories">
            <div class="category-section">
                <div class="category-title">Парикмахерские услуги</div>
                <div class="services-list">
                    <div class="service-item" onclick="toggleService(1, this, 'hair')">
                        <div class="service-name">
                            Женская стрижка + укладка (короткие волосы)
                            <div class="service-description">Профессиональная стрижка и укладка</div>
                            <div class="service-duration">Продолжительность: 90 мин</div>
                        </div>
                        <div class="service-price">7 210 ₽</div>
                    </div>
                    <div class="service-item" onclick="toggleService(2, this, 'hair')">
                        <div class="service-name">
                            Женская стрижка + укладка (длинные волосы)
                            <div class="service-description">Профессиональная стрижка и укладка</div>
                            <div class="service-duration">Продолжительность: 120 мин</div>
                        </div>
                        <div class="service-price">7 930 ₽</div>
                    </div>
                    <div class="service-item" onclick="toggleService(3, this, 'hair')">
                        <div class="service-name">
                            Окрашивание волос
                            <div class="service-description">Окрашивание любой сложности</div>
                            <div class="service-duration">Продолжительность: 180 мин</div>
                        </div>
                        <div class="service-price">13 000 ₽</div>
                    </div>
                </div>
            </div>

            <div class="category-section">
                <div class="category-title">Массаж</div>
                <div class="services-list">
                    <div class="service-item" onclick="toggleService(9, this, 'massage')">
                        <div class="service-name">
                            Стоун массаж
                            <div class="service-description">Массаж горячими камнями</div>
                            <div class="service-duration">Продолжительность: 90 мин</div>
                        </div>
                        <div class="service-price">4 800 ₽</div>
                    </div>
                    <div class="service-item" onclick="toggleService(10, this, 'massage')">
                        <div class="service-name">
                            Антицеллюлитный массаж
                            <div class="service-description">Массаж проблемных зон</div>
                            <div class="service-duration">Продолжительность: 60 мин</div>
                        </div>
                        <div class="service-price">5 200 ₽</div>
                    </div>
                    <div class="service-item" onclick="toggleService(12, this, 'massage')">
                        <div class="service-name">
                            Тайский массаж
                            <div class="service-description">Традиционный тайский массаж</div>
                            <div class="service-duration">Продолжительность: 90 мин</div>
                        </div>
                        <div class="service-price">6 700 ₽</div>
                    </div>
                </div>
            </div>

            <div class="category-section">
                <div class="category-title">Косметология</div>
                <div class="services-list">
                    <div class="service-item" onclick="toggleService(11, this, 'cosmetology')">
                        <div class="service-name">
                            Массаж лица "Тоффа"
                            <div class="service-description">Испанский массаж лица</div>
                            <div class="service-duration">Продолжительность: 50 мин</div>
                        </div>
                        <div class="service-price">5 300 ₽</div>
                    </div>
                    <div class="service-item" onclick="toggleService(8, this, 'cosmetology')">
                        <div class="service-name">
                            Окрашивание бровей
                            <div class="service-description">Коррекция и окрашивание</div>
                            <div class="service-duration">Продолжительность: 30 мин</div>
                        </div>
                        <div class="service-price">1 350 ₽</div>
                    </div>
                </div>
            </div>

            <div class="category-section">
                <div class="category-title">Ногтевой сервис</div>
                <div class="services-list">
                    <div class="service-item" onclick="toggleService(13, this, 'nails')">
                        <div class="service-name">
                            Классический маникюр
                            <div class="service-description">Уход и покрытие гель-лаком</div>
                            <div class="service-duration">Продолжительность: 90 мин</div>
                        </div>
                        <div class="service-price">2 500 ₽</div>
                    </div>
                    <div class="service-item" onclick="toggleService(14, this, 'nails')">
                        <div class="service-name">
                            Аппаратный педикюр
                            <div class="service-description">Профессиональный уход за стопами</div>
                            <div class="service-duration">Продолжительность: 90 мин</div>
                        </div>
                        <div class="service-price">3 500 ₽</div>
                    </div>
                </div>
            </div>
        </div>

        <button class="btn btn-continue" onclick="showPage('page-specialists')" id="btn-continue-services" disabled>Далее</button>
    </div>

    <!-- Страница 3: Выбор мастера -->
    <div class="page" id="page-specialists">
        <h1>Выберите мастера</h1>
        
        <div class="selection-info" id="specialist-selection-info">
            <!-- Информация о выбранной услуге будет здесь -->
        </div>
        
        <div class="specialists-grid" id="specialists-container">
            <!-- Мастера будут загружены через JavaScript -->
        </div>

        <button class="btn btn-continue" onclick="showPage('page-date')" id="btn-continue-specialist" disabled>Далее</button>
    </div>

    <!-- Страница 4: Выбор даты и времени -->
    <div class="page" id="page-date">
        <h1>Выберите дату и время</h1>
        
        <div class="selection-info">
            <strong>Выбранная услуга:</strong> <span id="selected-service-info">-</span><br>
            <strong>Выбранный мастер:</strong> <span id="selected-specialist-info">-</span>
        </div>
        
        <!-- Показываем уже записанные услуги -->
        <div id="appointed-services-preview" style="display: none; margin-bottom: 30px;">
            <div class="selection-info">
                <strong>Уже записаны:</strong>
                <div id="appointed-services-list"></div>
            </div>
        </div>
        
        <div class="classic-calendar">
            <div class="calendar-header">
                <button class="calendar-nav" onclick="changeMonth(-1)">‹</button>
                <div class="current-month" id="current-month">Январь 2024</div>
                <button class="calendar-nav" onclick="changeMonth(1)">›</button>
            </div>
            
            <div class="calendar-weekdays">
                <div class="weekday">ПН</div>
                <div class="weekday">ВТ</div>
                <div class="weekday">СР</div>
                <div class="weekday">ЧТ</div>
                <div class="weekday">ПТ</div>
                <div class="weekday">СБ</div>
                <div class="weekday">ВС</div>
            </div>
            
            <div class="calendar-days" id="calendar-days">
                <!-- Дни будут загружены через JavaScript -->
            </div>
        </div>

        <div class="time-slots-container">
            <div class="duration-info" id="duration-info">
                Выберите мастера и дату для просмотра доступного времени
            </div>
            
            <div id="time-slots-display" style="display: none;">
                <div class="time-period">Утренние часы</div>
                <div class="time-slots" id="morning-slots"></div>
                
                <div class="time-period">Дневные часы</div>
                <div class="time-slots" id="day-slots"></div>
                
                <div class="time-period">Вечерние часы</div>
                <div class="time-slots" id="evening-slots"></div>
            </div>
        </div>

        <button class="btn btn-continue" onclick="showPage('page-add-service')" id="btn-continue-date" disabled>Далее</button>
    </div>

    <!-- Страница 5: Дополнительная услуга -->
    <div class="page" id="page-add-service">
        <h1>Хотите добавить еще услугу?</h1>
        
        <!-- Показываем все выбранные услуги -->
        <div id="all-appointed-services" style="margin-bottom: 30px;">
            <!-- Список всех записанных услуг будет здесь -->
        </div>
        
        <div class="add-service-prompt">
            <p style="font-size: 18px; margin-bottom: 20px;">Вы можете добавить дополнительные услуги к вашему визиту</p>
            
            <div class="add-service-buttons">
                <button class="add-service-btn yes" onclick="addAnotherService()">Да, добавить услугу</button>
                <button class="add-service-btn no" onclick="showPage('page-final')">Нет, продолжить</button>
            </div>
        </div>
    </div>

    <!-- Страница 6: Финальная форма -->
    <div class="page" id="page-final">
        <h1>Ваши данные</h1>
        
        <div class="form-group">
            <label>Имя *</label>
            <input type="text" placeholder="Введите ваше имя" id="client-name" oninput="validateForm()">
            <div class="error-message" id="name-error">Пожалуйста, введите ваше имя</div>
        </div>
        
        <div class="form-group">
            <label>Телефон *</label>
            <input type="tel" placeholder="+7 (XXX) XXX-XX-XX" id="client-phone" oninput="validateForm()">
            <div class="error-message" id="phone-error">Пожалуйста, введите корректный номер телефона</div>
        </div>
        
        <div class="form-group">
            <label>E-mail</label>
            <input type="email" placeholder="Введите ваш e-mail" id="client-email">
        </div>
        
        <div class="form-group">
            <label>Комментарий</label>
            <textarea placeholder="Дополнительные пожелания" id="client-comment"></textarea>
        </div>
        
        <div class="form-group">
            <div class="checkbox-group">
                <input type="checkbox" id="reminder">
                <label for="reminder">Напоминание</label>
            </div>
            <small>За 24 часа до записи</small>
        </div>

        <!-- Секция промокода -->
        <div class="promocode-section">
            <h3 style="margin-bottom: 10px;">Есть промокод?</h3>
            <p style="color: #666; margin-bottom: 10px; font-size: 14px;">Введите промокод для получения скидки</p>
            <div class="promocode-input-group">
                <input type="text" class="promocode-input" id="promocode-input" placeholder="Введите промокод" maxlength="10">
                <button class="promocode-btn" id="apply-promocode" onclick="applyPromocode()">Применить</button>
            </div>
            <div class="discount-applied" id="discount-applied">
                ✅ Промокод применен! Скидка 5% активирована
            </div>
            <div class="discount-error" id="discount-error">
                ❌ Неверный промокод
            </div>
        </div>

        <div class="appointment-summary">
            <h3>Детали записи</h3>
            <div class="summary-item"><strong>Салон:</strong> <span id="summary-salon">-</span></div>
            
            <div class="selected-services">
                <strong>Выбранные услуги:</strong>
                <div id="summary-services">Не выбрано</div>
                
                <!-- Блок скидки -->
                <div class="summary-item" id="discount-section" style="display: none;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Дополнительная скидка:</span>
                        <span class="discount-amount" id="discount-amount">-0 ₽</span>
                    </div>
                </div>
                
                <div class="summary-item">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span><strong>Общая стоимость:</strong></span>
                        <span>
                            <span class="original-price" id="original-price" style="display: none;">0 ₽</span>
                            <strong id="summary-total">0</strong> ₽
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="discount-info">
            Специальное предложение: скидка 5% на стрижку и укладку при записи онлайн
        </div>

        <div class="privacy-notice">
            Нажимая кнопку "Записаться", вы соглашаетесь с политикой конфиденциальности и обработкой персональных данных.
        </div>

        <button class="btn" onclick="submitForm()" id="btn-submit" disabled>Записаться</button>
    </div>

    <!-- Страница 7: Благодарность -->
    <div class="page" id="page-thankyou">
        <h1>Ваша заявка обрабатывается.</h1>
        <p style="text-align: center; margin: 20px 0;">Наш специалист с Вами свяжется в ближайшее время</p>
        <h2 style="text-align: center; margin: 30px 0;">Спасибо!</h2>
        
        <div class="appointment-summary">
            <h3>Информация о вашей записи</h3>
            <div class="summary-item"><strong>Номер записи:</strong> #<span id="booking-number">11201</span></div>
            <div class="summary-item"><strong>Имя:</strong> <span id="final-name">-</span></div>
            <div class="summary-item"><strong>Телефон:</strong> <span id="final-phone">-</span></div>
            <div class="summary-item"><strong>Салон:</strong> <span id="final-salon">-</span></div>
            
            <div class="selected-services">
                <strong>Услуги:</strong>
                <div id="final-services">-</div>
                
                <!-- Блок скидки на странице благодарности -->
                <div class="summary-item" id="final-discount-section" style="display: none;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Дополнительная скидка:</span>
                        <span class="discount-amount" id="final-discount-amount">-0 ₽</span>
                    </div>
                </div>
                
                <div class="summary-item">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span><strong>Общая стоимость:</strong></span>
                        <span>
                            <span class="original-price" id="final-original-price" style="display: none;">0 ₽</span>
                            <strong id="final-total">0</strong> ₽
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <button class="btn" onclick="showPage('page-salon')">Записаться снова</button>
    </div>
</div>

<footer>
    <div class="footer__items">
        <div class="footer__img"><img src="footer__logo.svg" alt=""></div>
        <div class="footer__contacts">
            <h2>Контакты</h2>
            <ul>
                <li>+7 (909) 999-99-99</li>
                <li>+7 (915) 123-45-67</li>
                <li>Рязанский проспект, дом 39 лит. С</li>
            </ul>
        </div>
        <div class="working__time">
            <h2>Режим работы</h2>
            <ul><li>C 10:00 до 21:00 (Пн-Пт)</li>
            <li>С 11:00 до 20:00 (Сб-Вс)</li></ul>
        </div>
        <div class="social">
            <h2>Мы в социальных сетях</h2>
            <button
            onclick="window.location.href='https://vk.com/club234239337'" style="background: none; border: none; padding: 0; cursor: pointer; outline: none;">
                <img src="VK.png" alt="">
            </button>

            <button
            onclick="window.location.href='https://max.ru'" style="background: none; border: none; padding: 0; cursor: pointer; outline: none;">
                <img src="MAX.png" alt="">
            </button>
        </div>
    </div>
</footer>
<section>
    <div class="end">
        <h1>Copyright © 2017 - 2025</h1>
    </div>
</section>

<script>
    // Данные приложения
    let appointmentData = {
        salon: '',
        salonAddress: '',
        services: [],
        selectedService: null,
        currentAppointment: {
            service: null,
            specialist: '',
            specialistDuration: 0,
            date: '',
            time: ''
        },
        clientName: '',
        clientPhone: '',
        clientEmail: '',
        clientComment: '',
        reminder: false,
        promocodeApplied: false,
        discountAmount: 0,
        originalTotal: 0
    };

    // Текущая дата для календаря
    let currentDate = new Date();
    currentDate.setDate(1);

    // База данных занятых слотов
    const bookedSlots = {
        'АННА ПАВЛОВА': ['2024-01-15 10:00', '2024-01-15 14:30'],
        'ЮЛИЯ РОТАРЬ': ['2024-01-15 12:00', '2024-01-16 10:00'],
        'МАРИНА МИШЕНКО': ['2024-01-15 10:00', '2024-01-16 12:30'],
        'НАТАЛЬЯ ШТЕРН': ['2024-01-15 11:00', '2024-01-17 13:00'],
        'АНАСТАСИЯ ДАХНО': ['2024-01-16 10:00', '2024-01-17 12:00'],
        'НАТАЛИЯ ПОНУЛЯК': ['2024-01-15 10:00', '2024-01-16 11:00']
    };

    // Список услуг с продолжительностью и категориями
    const servicesData = {
        1: { name: "Женская стрижка + укладка (короткие волосы)", price: 7210, duration: 90, category: 'hair' },
        2: { name: "Женская стрижка + укладка (длинные волосы)", price: 7930, duration: 120, category: 'hair' },
        3: { name: "Окрашивание волос", price: 13000, duration: 180, category: 'hair' },
        8: { name: "Окрашивание бровей", price: 1350, duration: 30, category: 'cosmetology' },
        9: { name: "Стоун массаж", price: 4800, duration: 90, category: 'massage' },
        10: { name: "Антицеллюлитный массаж", price: 5200, duration: 60, category: 'massage' },
        11: { name: "Массаж лица 'Тоффа'", price: 5300, duration: 50, category: 'cosmetology' },
        12: { name: "Тайский массаж", price: 6700, duration: 90, category: 'massage' },
        13: { name: "Классический маникюр", price: 2500, duration: 90, category: 'nails' },
        14: { name: "Аппаратный педикюр", price: 3500, duration: 90, category: 'nails' }
    };

    // Список мастеров с специализациями
    const specialistsData = [
        { 
            name: 'АННА ПАВЛОВА', 
            role: 'Эстетист-массажист', 
            duration: 90, 
            specializations: ['massage', 'cosmetology'] 
        },
        { 
            name: 'ЮЛИЯ РОТАРЬ', 
            role: 'Стилист', 
            duration: 120, 
            specializations: ['hair'] 
        },
        { 
            name: 'НАТАЛИЯ ПОНУЛЯК', 
            role: 'Администратор', 
            duration: 60, 
            specializations: ['consultation'] 
        },
        { 
            name: 'АНАСТАСИЯ ДАХНО', 
            role: 'Мастер ногтевого сервиса', 
            duration: 120, 
            specializations: ['nails'] 
        },
        { 
            name: 'НАТАЛЬЯ ШТЕРН', 
            role: 'Косметолог', 
            duration: 120, 
            specializations: ['cosmetology'] 
        },
        { 
            name: 'МАРИНА МИШЕНКО', 
            role: 'Визажист', 
            duration: 150, 
            specializations: ['makeup'] 
        }
    ];

    // Функции для работы с формой
    function showPage(pageId) {
        document.querySelectorAll('.page').forEach(page => {
            page.classList.remove('active');
        });
        document.getElementById(pageId).classList.add('active');
        
        if (pageId === 'page-specialists') {
            loadSpecialists();
        } else if (pageId === 'page-date') {
            renderCalendar();
            updateSelectedServiceInfo();
            updateAppointedServicesPreview();
        } else if (pageId === 'page-add-service') {
            updateAllAppointedServices();
        } else if (pageId === 'page-final') {
            updateSummary();
        }
        
        window.scrollTo(0, 0);
    }

    function selectSalon(name, address, element) {
        document.querySelectorAll('.salon-card').forEach(card => {
            card.classList.remove('selected');
        });
        element.classList.add('selected');
        appointmentData.salon = name;
        appointmentData.salonAddress = address;
    }

    function toggleService(serviceId, element, category) {
        // Снимаем выделение со всех услуг
        document.querySelectorAll('.service-item').forEach(item => {
            item.classList.remove('selected');
        });
        
        // Выделяем выбранную услугу
        element.classList.add('selected');
        
        const service = servicesData[serviceId];
        appointmentData.selectedService = {
            id: serviceId,
            name: service.name,
            price: service.price,
            duration: service.duration,
            category: category
        };
        
        // Активируем кнопку "Далее"
        document.getElementById('btn-continue-services').disabled = false;
        
        // Обновляем превью выбранных услуг
        updateSelectedServicesPreview();
    }

    function updateSelectedServicesPreview() {
        const preview = document.getElementById('selected-services-preview');
        const list = document.getElementById('selected-services-list');
        
        if (appointmentData.services.length > 0) {
            list.innerHTML = '';
            appointmentData.services.forEach(service => {
                const serviceElement = document.createElement('div');
                serviceElement.className = 'appointed-service-item';
                serviceElement.innerHTML = `
                    <div><strong>${service.name}</strong></div>
                    <div>Мастер: ${service.specialist}</div>
                    <div>Время: ${service.date} в ${service.time}</div>
                    <div>Цена: ${service.price.toLocaleString()} ₽</div>
                `;
                list.appendChild(serviceElement);
            });
            preview.style.display = 'block';
        } else {
            preview.style.display = 'none';
        }
    }

    function loadSpecialists() {
        const specialistsContainer = document.getElementById('specialists-container');
        const selectionInfo = document.getElementById('specialist-selection-info');
        
        specialistsContainer.innerHTML = '';
        
        if (!appointmentData.selectedService) {
            selectionInfo.innerHTML = '<strong>Ошибка:</strong> Услуга не выбрана';
            return;
        }
        
        const selectedCategory = appointmentData.selectedService.category;
        selectionInfo.innerHTML = `<strong>Выбранная услуга:</strong> ${appointmentData.selectedService.name}<br>
                                  <strong>Категория:</strong> ${getCategoryName(selectedCategory)}`;
        
        // Показываем только мастеров с подходящей специализацией
        const availableSpecialists = specialistsData.filter(specialist => 
            specialist.specializations.includes(selectedCategory)
        );
        
        if (availableSpecialists.length === 0) {
            specialistsContainer.innerHTML = '<p style="text-align: center; color: #666;">Нет доступных мастеров для выбранной услуги</p>';
            document.getElementById('btn-continue-specialist').disabled = true;
            return;
        }
        
        availableSpecialists.forEach(specialist => {
            const specialistElement = document.createElement('div');
            specialistElement.className = 'specialist-card';
            specialistElement.onclick = () => selectSpecialist(specialist.name, specialist.duration, specialistElement);
            
            specialistElement.innerHTML = `
                <div class="specialist-name">${specialist.name}</div>
                <div class="specialist-role">${specialist.role}</div>
                <div class="specialist-duration">Продолжительность: ${specialist.duration} мин</div>
                <div class="specialist-specialization">Специализация: ${getSpecializationsText(specialist.specializations)}</div>
            `;
            
            specialistsContainer.appendChild(specialistElement);
        });
        
        // Сбрасываем выбор мастера при загрузке страницы
        appointmentData.currentAppointment.specialist = '';
        appointmentData.currentAppointment.specialistDuration = 0;
        document.getElementById('btn-continue-specialist').disabled = true;
    }

    function getCategoryName(category) {
        const categories = {
            'hair': 'Парикмахерские услуги',
            'massage': 'Массаж',
            'cosmetology': 'Косметология',
            'nails': 'Ногтевой сервис',
            'makeup': 'Макияж',
            'consultation': 'Консультации'
        };
        return categories[category] || category;
    }

    function getSpecializationsText(specializations) {
        return specializations.map(spec => getCategoryName(spec)).join(', ');
    }

    function selectSpecialist(name, duration, element) {
        document.querySelectorAll('.specialist-card').forEach(card => {
            card.classList.remove('selected');
        });
        element.classList.add('selected');
        appointmentData.currentAppointment.specialist = name;
        appointmentData.currentAppointment.specialistDuration = duration;
        document.getElementById('btn-continue-specialist').disabled = false;
    }

    function updateSelectedServiceInfo() {
        if (appointmentData.selectedService && appointmentData.currentAppointment.specialist) {
            document.getElementById('selected-service-info').textContent = appointmentData.selectedService.name;
            document.getElementById('selected-specialist-info').textContent = appointmentData.currentAppointment.specialist;
        }
    }

    function updateAppointedServicesPreview() {
        const preview = document.getElementById('appointed-services-preview');
        const list = document.getElementById('appointed-services-list');
        
        if (appointmentData.services.length > 0) {
            list.innerHTML = '';
            appointmentData.services.forEach(service => {
                const serviceElement = document.createElement('div');
                serviceElement.className = 'appointed-service-item';
                serviceElement.innerHTML = `
                    <div><strong>${service.name}</strong></div>
                    <div>Мастер: ${service.specialist}</div>
                    <div>Время: ${service.date} в ${service.time}</div>
                    <div>Цена: ${service.price.toLocaleString()} ₽</div>
                `;
                list.appendChild(serviceElement);
            });
            preview.style.display = 'block';
        } else {
            preview.style.display = 'none';
        }
    }

    function updateAllAppointedServices() {
        const container = document.getElementById('all-appointed-services');
        
        if (appointmentData.services.length > 0) {
            let html = '<div class="selection-info"><strong>Все записанные услуги:</strong>';
            
            appointmentData.services.forEach((service, index) => {
                html += `
                    <div class="appointed-service-item">
                        <div><strong>${service.name}</strong></div>
                        <div>Мастер: ${service.specialist}</div>
                        <div>Время: ${service.date} в ${service.time}</div>
                        <div>Цена: ${service.price.toLocaleString()} ₽</div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        } else {
            container.innerHTML = '';
        }
    }

    function addAnotherService() {
        // Сохраняем текущую запись в список услуг
        if (appointmentData.selectedService && appointmentData.currentAppointment.specialist && appointmentData.currentAppointment.date && appointmentData.currentAppointment.time) {
            const serviceWithAppointment = {
                ...appointmentData.selectedService,
                specialist: appointmentData.currentAppointment.specialist,
                date: appointmentData.currentAppointment.date,
                time: appointmentData.currentAppointment.time
            };
            appointmentData.services.push(serviceWithAppointment);
        }
        
        // Сбрасываем выбор для новой услуги
        appointmentData.selectedService = null;
        appointmentData.currentAppointment = {
            service: null,
            specialist: '',
            specialistDuration: 0,
            date: '',
            time: ''
        };
        
        document.querySelectorAll('.service-item').forEach(item => {
            item.classList.remove('selected');
        });
        document.getElementById('btn-continue-services').disabled = true;
        
        showPage('page-services');
    }

    // Функции календаря и временных слотов
    function renderCalendar() {
        const monthNames = ["Январь", "Февраль", "Март", "Апрель", "Май", "Июнь", "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"];
        document.getElementById('current-month').textContent = `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;
        
        const calendarDays = document.getElementById('calendar-days');
        calendarDays.innerHTML = '';
        
        const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
        const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
        const prevLastDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 0).getDate();
        const firstDayIndex = firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1;
        const today = new Date();
        
        for (let i = firstDayIndex; i > 0; i--) {
            const day = prevLastDay - i + 1;
            const dayElement = document.createElement('div');
            dayElement.className = 'calendar-day other-month';
            dayElement.textContent = day;
            calendarDays.appendChild(dayElement);
        }
        
        for (let i = 1; i <= lastDay.getDate(); i++) {
            const dayElement = document.createElement('div');
            dayElement.className = 'calendar-day';
            dayElement.textContent = i;
            
            const cellDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), i);
            
            if (today.getDate() === i && today.getMonth() === currentDate.getMonth() && today.getFullYear() === currentDate.getFullYear()) {
                dayElement.classList.add('today');
            }
            
            if (cellDate < new Date(today.getFullYear(), today.getMonth(), today.getDate())) {
                dayElement.classList.add('disabled');
            } else {
                dayElement.onclick = () => selectDate(i, dayElement);
            }
            
            calendarDays.appendChild(dayElement);
        }
        
        const totalCells = 42;
        const nextDays = totalCells - (firstDayIndex + lastDay.getDate());
        
        for (let i = 1; i <= nextDays; i++) {
            const dayElement = document.createElement('div');
            dayElement.className = 'calendar-day other-month';
            dayElement.textContent = i;
            calendarDays.appendChild(dayElement);
        }
    }

    function changeMonth(direction) {
        currentDate.setMonth(currentDate.getMonth() + direction);
        renderCalendar();
    }

    function selectDate(day, element) {
        document.querySelectorAll('.calendar-day').forEach(dayEl => {
            dayEl.classList.remove('selected');
        });
        element.classList.add('selected');
        
        const selectedDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);
        const formattedDate = `${selectedDate.getFullYear()}-${(selectedDate.getMonth() + 1).toString().padStart(2, '0')}-${selectedDate.getDate().toString().padStart(2, '0')}`;
        appointmentData.currentAppointment.date = selectedDate.toLocaleDateString('ru-RU');
        appointmentData.currentAppointment.formattedDate = formattedDate;
        
        generateTimeSlots();
    }

    function generateTimeSlots() {
        if (!appointmentData.currentAppointment.specialist || !appointmentData.currentAppointment.date) return;
        
        const duration = appointmentData.currentAppointment.specialistDuration;
        document.getElementById('duration-info').textContent = `Продолжительность услуги: ${duration} минут`;
        document.getElementById('time-slots-display').style.display = 'block';
        
        document.getElementById('morning-slots').innerHTML = '';
        document.getElementById('day-slots').innerHTML = '';
        document.getElementById('evening-slots').innerHTML = '';
        
        const timeSlots = [];
        const startHour = 10;
        const endHour = 21;
        
        let intervalMinutes = duration;
        
        let currentTime = startHour * 60;
        
        while (currentTime + duration <= endHour * 60) {
            const hour = Math.floor(currentTime / 60);
            const minute = currentTime % 60;
            
            const timeString = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
            const endTimeMinutes = currentTime + duration;
            const endHourValue = Math.floor(endTimeMinutes / 60);
            const endMinuteValue = endTimeMinutes % 60;
            const endTimeString = `${endHourValue.toString().padStart(2, '0')}:${endMinuteValue.toString().padStart(2, '0')}`;
            
            const dateTimeStr = `${appointmentData.currentAppointment.formattedDate} ${timeString}`;
            
            const specialistBookedSlots = bookedSlots[appointmentData.currentAppointment.specialist] || [];
            const isBooked = specialistBookedSlots.includes(dateTimeStr);
            
            timeSlots.push({
                time: timeString,
                endTime: endTimeString,
                booked: isBooked,
                duration: duration
            });
            
            currentTime += intervalMinutes;
        }
        
        timeSlots.forEach(slot => {
            const hour = parseInt(slot.time.split(':')[0]);
            const slotElement = document.createElement('div');
            
            if (slot.booked) {
                slotElement.className = 'time-slot booked';
                slotElement.title = 'Это время уже занято';
            } else {
                slotElement.className = 'time-slot';
                slotElement.onclick = () => selectTimeSlot(slot.time, slotElement);
                slotElement.title = `${slot.time} - ${slot.endTime} (${slot.duration} мин)`;
            }
            
            slotElement.textContent = slot.time;
            
            if (hour < 13) {
                document.getElementById('morning-slots').appendChild(slotElement);
            } else if (hour < 17) {
                document.getElementById('day-slots').appendChild(slotElement);
            } else {
                document.getElementById('evening-slots').appendChild(slotElement);
            }
        });
    }

    function selectTimeSlot(time, element) {
        document.querySelectorAll('.time-slot').forEach(slot => {
            if (!slot.classList.contains('booked')) {
                slot.classList.remove('selected');
            }
        });
        element.classList.add('selected');
        appointmentData.currentAppointment.time = time;
        document.getElementById('btn-continue-date').disabled = false;
    }

    function updateSummary() {
        // Добавляем текущую выбранную услугу в список
        if (appointmentData.selectedService && 
            appointmentData.currentAppointment.specialist && 
            appointmentData.currentAppointment.date && 
            appointmentData.currentAppointment.time &&
            !appointmentData.services.find(s => s.id === appointmentData.selectedService.id)) {
            
            const serviceWithAppointment = {
                ...appointmentData.selectedService,
                specialist: appointmentData.currentAppointment.specialist,
                date: appointmentData.currentAppointment.date,
                time: appointmentData.currentAppointment.time
            };
            appointmentData.services.push(serviceWithAppointment);
        }
        
        document.getElementById('summary-salon').textContent = `${appointmentData.salon}, ${appointmentData.salonAddress}`;
        
        const servicesContainer = document.getElementById('summary-services');
        const totalElement = document.getElementById('summary-total');
        const originalPriceElement = document.getElementById('original-price');
        const discountSection = document.getElementById('discount-section');
        const discountAmountElement = document.getElementById('discount-amount');
        
        if (appointmentData.services.length > 0) {
            let servicesHTML = '';
            let total = 0;
            
            appointmentData.services.forEach(service => {
                servicesHTML += `
                    <div class="service-summary-item">
                        <span>${service.name} (${service.specialist}, ${service.date} в ${service.time})</span>
                        <span>${service.price.toLocaleString()} ₽</span>
                    </div>
                `;
                total += service.price;
            });
            
            servicesContainer.innerHTML = servicesHTML;
            
            // Сохраняем оригинальную сумму
            appointmentData.originalTotal = total;
            
            // Применяем скидку если промокод активирован
            let finalTotal = total;
            if (appointmentData.promocodeApplied) {
                appointmentData.discountAmount = total * 0.05;
                finalTotal = total - appointmentData.discountAmount;
                
                // Показываем блок скидки
                discountSection.style.display = 'block';
                discountAmountElement.textContent = `-${appointmentData.discountAmount.toLocaleString()} ₽`;
                
                // Показываем оригинальную цену
                originalPriceElement.textContent = `${total.toLocaleString()} ₽`;
                originalPriceElement.style.display = 'inline';
            } else {
                // Скрываем блок скидки
                discountSection.style.display = 'none';
                originalPriceElement.style.display = 'none';
            }
            
            totalElement.textContent = finalTotal.toLocaleString();
        } else {
            servicesContainer.textContent = 'Не выбрано';
            totalElement.textContent = '0';
            discountSection.style.display = 'none';
            originalPriceElement.style.display = 'none';
        }
    }

    // Функция применения промокода
    function applyPromocode() {
        const promocodeInput = document.getElementById('promocode-input');
        const discountApplied = document.getElementById('discount-applied');
        const discountError = document.getElementById('discount-error');
        const applyButton = document.getElementById('apply-promocode');
        
        const enteredCode = promocodeInput.value.trim().toUpperCase();
        
        // Сбрасываем предыдущие сообщения
        discountApplied.style.display = 'none';
        discountError.style.display = 'none';
        
        if (enteredCode === 'MASTY5') {
            // Правильный промокод
            appointmentData.promocodeApplied = true;
            discountApplied.style.display = 'block';
            applyButton.disabled = true;
            promocodeInput.disabled = true;
            applyButton.textContent = 'Применено';
            applyButton.style.background = '#6c757d';
            
            // Обновляем итоговую сумму
            updateSummary();
        } else if (enteredCode === '') {
            // Пустое поле
            discountError.textContent = 'Введите промокод';
            discountError.style.display = 'block';
        } else {
            // Неверный промокод
            discountError.textContent = '❌ Неверный промокод';
            discountError.style.display = 'block';
        }
    }

    function validateForm() {
        const name = document.getElementById('client-name').value.trim();
        const phone = document.getElementById('client-phone').value.trim();
        const nameError = document.getElementById('name-error');
        const phoneError = document.getElementById('phone-error');
        const submitBtn = document.getElementById('btn-submit');
        
        let isValid = true;
        
        if (name.length < 2) {
            nameError.style.display = 'block';
            isValid = false;
        } else {
            nameError.style.display = 'none';
        }
        
        const phoneRegex = /^[\+]?[7-8]?[0-9\s\-\(\)]{10,}$/;
        if (!phoneRegex.test(phone)) {
            phoneError.style.display = 'block';
            isValid = false;
        } else {
            phoneError.style.display = 'none';
        }
        
        submitBtn.disabled = !isValid;
        return isValid;
    }

    function submitForm() {
        if (!validateForm()) return;
        
        appointmentData.clientName = document.getElementById('client-name').value.trim();
        appointmentData.clientPhone = document.getElementById('client-phone').value.trim();
        appointmentData.clientEmail = document.getElementById('client-email').value.trim();
        appointmentData.clientComment = document.getElementById('client-comment').value.trim();
        appointmentData.reminder = document.getElementById('reminder').checked;
        
        document.getElementById('final-name').textContent = appointmentData.clientName;
        document.getElementById('final-phone').textContent = appointmentData.clientPhone;
        document.getElementById('final-salon').textContent = `${appointmentData.salon}, ${appointmentData.salonAddress}`;
        
        let finalServicesHTML = '';
        let total = appointmentData.originalTotal;
        let finalTotal = total;
        const finalDiscountSection = document.getElementById('final-discount-section');
        const finalDiscountAmount = document.getElementById('final-discount-amount');
        const finalOriginalPrice = document.getElementById('final-original-price');
        const finalTotalElement = document.getElementById('final-total');
        
        appointmentData.services.forEach(service => {
            finalServicesHTML += `
                <div class="service-summary-item">
                    <span>${service.name} (${service.specialist}, ${service.date} в ${service.time})</span>
                    <span>${service.price.toLocaleString()} ₽</span>
                </div>
            `;
        });
        
        document.getElementById('final-services').innerHTML = finalServicesHTML;
        
        // Применяем скидку на странице благодарности
        if (appointmentData.promocodeApplied) {
            finalTotal = total - appointmentData.discountAmount;
            finalDiscountSection.style.display = 'block';
            finalDiscountAmount.textContent = `-${appointmentData.discountAmount.toLocaleString()} ₽`;
            finalOriginalPrice.textContent = `${total.toLocaleString()} ₽`;
            finalOriginalPrice.style.display = 'inline';
        } else {
            finalDiscountSection.style.display = 'none';
            finalOriginalPrice.style.display = 'none';
        }
        
        finalTotalElement.textContent = finalTotal.toLocaleString();
        
        document.getElementById('booking-number').textContent = Math.floor(11000 + Math.random() * 1000);
        
        showPage('page-thankyou');
        
        console.log('Данные записи:', appointmentData);
    }

    // Инициализация
    document.addEventListener('DOMContentLoaded', function() {
        showPage('page-salon');
        renderCalendar();
        
        // Добавляем обработчик Enter для поля промокода
        const promocodeInput = document.getElementById('promocode-input');
        promocodeInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                applyPromocode();
            }
        });
    });
</script>
</body>
</html>
w